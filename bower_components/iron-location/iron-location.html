<html><head><link rel="import" href="../polymer/polymer.html"><script>(function(){'use strict';Polymer({is:'iron-location',properties:{path:{type:String,notify:!0,value:function(){return window.decodeURIComponent(window.location.pathname)}},query:{type:String,notify:!0,value:function(){return window.location.search.slice(1)}},hash:{type:String,notify:!0,value:function(){return window.decodeURIComponent(window.location.hash.slice(1))}},dwellTime:{type:Number,value:2e3},urlSpaceRegex:{type:String,value:''},_urlSpaceRegExp:{computed:'_makeRegExp(urlSpaceRegex)'},_lastChangedAt:{type:Number},_initialized:{type:Boolean,value:!1}},hostAttributes:{hidden:!0},observers:['_updateUrl(path, query, hash)'],attached:function(){this.listen(window,'hashchange','_hashChanged'),this.listen(window,'location-changed','_urlChanged'),this.listen(window,'popstate','_urlChanged'),this.listen(document.body,'click','_globalOnClick'),this._lastChangedAt=window.performance.now()-(this.dwellTime-200),this._initialized=!0,this._urlChanged()},detached:function(){this.unlisten(window,'hashchange','_hashChanged'),this.unlisten(window,'location-changed','_urlChanged'),this.unlisten(window,'popstate','_urlChanged'),this.unlisten(document.body,'click','_globalOnClick'),this._initialized=!1},_hashChanged:function(){this.hash=window.decodeURIComponent(window.location.hash.substring(1))},_urlChanged:function(){this._dontUpdateUrl=!0,this._hashChanged(),this.path=window.decodeURIComponent(window.location.pathname),this.query=window.location.search.substring(1),this._dontUpdateUrl=!1,this._updateUrl()},_getUrl:function(){var b=window.encodeURI(this.path).replace(/\#/g,'%23').replace(/\?/g,'%3F'),c='';this.query&&(c='?'+this.query.replace(/\#/g,'%23'));var d='';return this.hash&&(d='#'+window.encodeURI(this.hash)),b+c+d},_updateUrl:function(){if(!this._dontUpdateUrl&&this._initialized&&(this.path!==window.decodeURIComponent(window.location.pathname)||this.query!==window.location.search.substring(1)||this.hash!==window.decodeURIComponent(window.location.hash.substring(1)))){var b=this._getUrl(),c=new URL(b,window.location.protocol+'//'+window.location.host).href,d=window.performance.now(),e=this._lastChangedAt+this.dwellTime>d;this._lastChangedAt=d,e?window.history.replaceState({},'',c):window.history.pushState({},'',c),this.fire('location-changed',{},{node:window})}},_globalOnClick:function(b){if(!b.defaultPrevented){var c=this._getSameOriginLinkHref(b);c&&(b.preventDefault(),c===window.location.href||(window.history.pushState({},'',c),this.fire('location-changed',{},{node:window})))}},_getSameOriginLinkHref:function(b){if(0!==b.button)return null;if(b.metaKey||b.ctrlKey)return null;for(var f,c=Polymer.dom(b).path,d=null,e=0;e<c.length;e++)if(f=c[e],'A'===f.tagName&&f.href){d=f;break}if(!d)return null;if('_blank'===d.target)return null;if(('_top'===d.target||'_parent'===d.target)&&window.top!==window)return null;var h,g=d.href;h=null==document.baseURI?new URL(g):new URL(g,document.baseURI);var j;if(window.location.origin?j=window.location.origin:(j=window.location.protocol+'//'+window.location.hostname,window.location.port&&(j+=':'+window.location.port)),h.origin!==j)return null;var k=h.pathname+h.search+h.hash;if(this._urlSpaceRegExp&&!this._urlSpaceRegExp.test(k))return null;var l=new URL(k,window.location.href).href;return l},_makeRegExp:function(b){return RegExp(b)}})})();</script></head><body></body></html>