<html><head><link rel="import" href="../iron-form-element-behavior/iron-form-element-behavior.html"><link rel="import" href="../iron-validatable-behavior/iron-validatable-behavior.html"><link rel="import" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="import" href="vaadin-date-picker-helper.html"><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.datepicker=vaadin.elements.datepicker||{},vaadin.elements.datepicker.DatePickerBehaviorImpl={observers:['_selectedDateChanged(_selectedDate, i18n.formatDate)','_validateInput(_selectedDate, _minDate, _maxDate)','_focusedDateChanged(_focusedDate, i18n.formatDate)','_announceFocusedDate(_focusedDate, opened, _ignoreAnnounce)'],properties:{_selectedDate:{type:Date},_focusedDate:Date,value:{type:String,observer:'_valueChanged'},hasValue:{type:Boolean,computed:'_hasValue(value)',reflectToAttribute:!0},initialPosition:String,label:String,opened:{type:Boolean,reflectToAttribute:!0,notify:!0},showWeekNumbers:{type:Boolean},_fullscreen:{value:!1,observer:'_fullscreenChanged'},_fullscreenMediaQuery:{value:'(max-width: 420px), (max-height: 420px)'},_touchPrevented:Array,i18n:{type:Object,value:function(){return{monthNames:['January','February','March','April','May','June','July','August','September','October','November','December'],weekdays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],weekdaysShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],firstDayOfWeek:0,week:'Week',calendar:'Calendar',clear:'Clear',today:'Today',cancel:'Cancel',formatDate:function(c){var f=c.getFullYear(),g=f.toString();return 3>g.length&&0<=f&&(g=(10>f?'000':'00')+f),c.getMonth()+1+'/'+c.getDate()+'/'+g},parseDate:function(c){var h,f=c.split('/'),g=new Date,j=g.getMonth(),l=g.getFullYear();if(3===f.length?(l=parseInt(f[2]),3>f[2].length&&0<=l&&(l+=50>l?2e3:1900),j=parseInt(f[0])-1,h=parseInt(f[1])):2===f.length?(j=parseInt(f[0])-1,h=parseInt(f[1])):1===f.length&&(h=parseInt(f[0])),void 0!=h){var m=new Date(0,0);return m.setFullYear(l),m.setMonth(j),m.setDate(h),m}},formatTitle:function(c,f){return c+' '+f}}}},min:{type:String,observer:'_minChanged'},max:{type:String,observer:'_maxChanged'},_minDate:{type:Date,value:null},_maxDate:{type:Date,value:null},_noInput:{type:Boolean,computed:'_isNoInput(_fullscreen, i18n, i18n.*, _ios)'},_ios:{type:Boolean,value:navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/)},_ignoreAnnounce:{value:!0},_focusOverlayOnOpen:Boolean,_documentPointerEvents:String},created:function(){this._boundOnScroll=this._onScroll.bind(this)},listeners:{tap:'open',touchend:'_preventDefault',keydown:'_onKeydown',close:'_close','date-tap':'_close','focus-input':'_focusAndSelect'},ready:function(){this.value===void 0&&(this.value='')},open:function(){this._updateAlignmentAndPosition(),this.disabled||this.readonly||this.$.dropdown.open()},_close:function(b){b&&b.stopPropagation(),this.inputElement.focus(),this.close()},close:function(){this.$.dropdown.close()},get inputElement(){return this._input()},_parseDate:function(b){var c=/^(\d{4}|[-+]\d{6})-(\d{2})-(\d{2})$/.exec(b);if(c){var f=new Date(0,0);return f.setFullYear(parseInt(c[1],10)),f.setMonth(parseInt(c[2],10)-1),f.setDate(parseInt(c[3],10)),f}},_isNoInput:function(){return this._fullscreen||!this.i18n.parseDate||this._ios},_formatISO:function(b){return b instanceof Date?new Date(b.getTime()-6e4*b.getTimezoneOffset()).toISOString().split('T')[0]:''},_selectedDateChanged:function(b,c){this.value=this._formatISO(b),this._focusedDate=b,this._inputValue=b?c(b):''},_focusedDateChanged:function(b,c){this._ignoreFocusedDateChange||this._noInput||(this._inputValue=b?c(b):'')},_hasValue:function(b){return!!b},_handleDateChange:function(b,c,f){if(!c)return void(this[b]=null);var g=this._parseDate(c);return g?void((!(this[b]instanceof Date)||g.getFullYear()!==this[b].getFullYear()||g.getMonth()!==this[b].getMonth()||g.getDate()!==this[b].getDate())&&(this[b]=g)):void(this.value=f)},_valueChanged:function(b,c){this._handleDateChange('_selectedDate',b,c)},_minChanged:function(b,c){this._handleDateChange('_minDate',b,c)},_maxChanged:function(b,c){this._handleDateChange('_maxDate',b,c)},_updateAlignmentAndPosition:function(){var b=Math.max(document.documentElement.clientWidth,window.innerWidth||0);this.$.dropdown.positionTarget=this._fullscreen?document.documentElement:this;var c=Math.max(document.documentElement.clientHeight,window.innerHeight||0),f=this.getBoundingClientRect().top>c/2,g=this.getBoundingClientRect().left+this.clientWidth/2>b/2;this.$.dropdown.verticalAlign=f?'bottom':'top',this.$.dropdown.horizontalAlign=this._fullscreen?null:g?'right':'left',this._fullscreen?(this.$.dropdown.style.marginTop=0,this.$.dropdown.style.marginBottom=0):(this.$.dropdown.style.marginTop=(f?10:this.clientHeight+2)+'px',this.$.dropdown.style.marginBottom=(f?this.clientHeight:10)+'px'),this.$.dropdown.refit()},_fullscreenChanged:function(){this.$.dropdown.opened&&this._updateAlignmentAndPosition()},_onOverlayOpened:function(){var b=this._parseDate(this.initialPosition),c=this._selectedDate||this.$.overlay.initialPosition||b||new Date;this.$.overlay.initialPosition=b||vaadin.elements.datepicker.DatePickerHelper._dateAllowed(c,this._minDate,this._maxDate)?c:vaadin.elements.datepicker.DatePickerHelper._getClosestDate(c,[this._minDate,this._maxDate]),this.$.overlay.scrollToDate(this.$.overlay.focusedDate||this.$.overlay.initialPosition),this._ignoreFocusedDateChange=!0,this.$.overlay.focusedDate=this.$.overlay.focusedDate||this.$.overlay.initialPosition,this._ignoreFocusedDateChange=!1,window.addEventListener('scroll',this._boundOnScroll,!0),window.addEventListener('resize',this._boundOnScroll,!0),''===document.createElement('div').style.webkitOverflowScrolling&&(this._touchPrevented=this._preventWebkitOverflowScrollingTouch(this.parentElement)),this._focusOverlayOnOpen?(this.$.overlay.focus(),this._focusOverlayOnOpen=!1):this._focus(),this.updateStyles(),this._documentPointerEvents=document.body.style.pointerEvents,document.body.style.pointerEvents='none',this._ignoreAnnounce=!1},_preventWebkitOverflowScrollingTouch:function(b){for(var c=[];b;){if('touch'===window.getComputedStyle(b).webkitOverflowScrolling){var f=b.style.webkitOverflowScrolling;b.style.webkitOverflowScrolling='auto',c.push({element:b,oldInlineValue:f})}b=b.parentElement}return c},_onOverlayClosed:function(){if(this._ignoreAnnounce=!0,window.removeEventListener('scroll',this._boundOnScroll,!0),window.removeEventListener('resize',this._boundOnScroll,!0),this._touchPrevented&&(this._touchPrevented.forEach(function(g){g.element.style.webkitOverflowScrolling=g.oldInlineValue}),this._touchPrevented=[]),this.updateStyles(),document.body.style.pointerEvents=this._documentPointerEvents,this._ignoreFocusedDateChange=!0,this.i18n.parseDate){var b=this._inputValue,c=this.i18n.parseDate(b);this._isValidDate(c)?this._selectedDate=c:(this._selectedDate=null,this._inputValue=b)}else this._focusedDate&&(this._selectedDate=this._focusedDate);this._ignoreFocusedDateChange=!1;var f=window.unwrap?window.unwrap(this.inputElement):this.inputElement;(this.shadowRoot&&this.shadowRoot.activeElement===f||document.activeElement===f)&&(f.selectionStart=f.selectionEnd),this.validate()},detached:function(){this._onOverlayClosed()},_onScroll:function(b){b.target!==window&&this.$.overlay.contains(b.target)||(this.$.dropdown.style.bottom='auto',this.$.dropdown.resetFit(),this._updateAlignmentAndPosition(),this.$.dropdown.fire('iron-resize'))},_preventCancelOnComponentAccess:function(b){var c=Polymer.dom(b.detail);/tap|mousedown|touchstart/.test(b.detail.type)&&-1<c.path.indexOf(this)&&b.preventDefault()},_focus:function(){this._noInput?this.$.overlay.focus():this.inputElement.focus()},_focusAndSelect:function(){this._noInput||(this._focus(),this.inputElement.setSelectionRange(0,this._inputValue.length))},_preventDefault:function(b){b.preventDefault()},_eventKey:function(b){for(var g,c=['down','up','enter','esc','tab'],f=0;f<c.length;f++)if(g=c[f],Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(b,g))return g},_isValidDate:function(b){return b&&!isNaN(b.getTime())},_onKeydown:function(b){if(this._noInput){-1===[9].indexOf(b.keyCode)&&b.preventDefault()}switch(this._eventKey(b)){case'down':case'up':b.preventDefault(),this.opened?(this.$.overlay.focus(),this.$.overlay._onKeydown(b)):(this._focusOverlayOnOpen=!0,this.open());break;case'enter':this.$.overlay.focusedDate&&(this._selectedDate=this.$.overlay.focusedDate),this.close();break;case'esc':this._focusedDate=this._selectedDate,this._close();break;case'tab':this.opened&&(b.preventDefault(),this.inputElement.setSelectionRange(0,0),b.shiftKey?this.$.overlay.focusCancel():(this.$.overlay.focus(),this.$.overlay.revealDate(this._focusedDate)));}},_validateInput:function(b,c,f){b&&(c||f)&&(this.invalid=!vaadin.elements.datepicker.DatePickerHelper._dateAllowed(b,c,f))},_userInputValueChanged:function(){var b=this.i18n.parseDate&&this.i18n.parseDate(this._inputValue);this._isValidDate(b)&&(this._ignoreFocusedDateChange=!0,this._focusedDate=b,this._ignoreFocusedDateChange=!1),this.opened||(this.open(),this.$.dropdown.async(this.$.dropdown.refit,500))},_announceFocusedDate:function(b,c,f){c&&!f&&this.$.overlay.announceFocusedDate()}},vaadin.elements.datepicker.DatePickerBehavior=[Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior,Polymer.IronA11yKeysBehavior,vaadin.elements.datepicker.DatePickerBehaviorImpl];</script></head><body></body></html>