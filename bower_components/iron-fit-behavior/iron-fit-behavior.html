<html><head><link rel="import" href="../polymer/polymer.html"><script>Polymer.IronFitBehavior={properties:{sizingTarget:{type:Object,value:function(){return this}},fitInto:{type:Object,value:window},noOverlap:{type:Boolean},positionTarget:{type:Element},horizontalAlign:{type:String},verticalAlign:{type:String},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0},autoFitOnAttach:{type:Boolean,value:!1},_fitInfo:{type:Object}},get _fitWidth(){var a;return a=this.fitInto===window?this.fitInto.innerWidth:this.fitInto.getBoundingClientRect().width,a},get _fitHeight(){var a;return a=this.fitInto===window?this.fitInto.innerHeight:this.fitInto.getBoundingClientRect().height,a},get _fitLeft(){var a;return a=this.fitInto===window?0:this.fitInto.getBoundingClientRect().left,a},get _fitTop(){var a;return a=this.fitInto===window?0:this.fitInto.getBoundingClientRect().top,a},get _defaultPositionTarget(){var a=Polymer.dom(this).parentNode;return a&&a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(a=a.host),a},get _localeHorizontalAlign(){if(this._isRTL){if('right'===this.horizontalAlign)return'left';if('left'===this.horizontalAlign)return'right'}return this.horizontalAlign},attached:function(){'undefined'==typeof this._isRTL&&(this._isRTL='rtl'==window.getComputedStyle(this).direction),this.positionTarget=this.positionTarget||this._defaultPositionTarget,this.autoFitOnAttach&&('none'===window.getComputedStyle(this).display?setTimeout(function(){this.fit()}.bind(this)):this.fit())},fit:function(){this.position(),this.constrain(),this.center()},_discoverInfo:function(){if(!this._fitInfo){var b=window.getComputedStyle(this),c=window.getComputedStyle(this.sizingTarget);this._fitInfo={inlineStyle:{top:this.style.top||'',left:this.style.left||'',position:this.style.position||''},sizerInlineStyle:{maxWidth:this.sizingTarget.style.maxWidth||'',maxHeight:this.sizingTarget.style.maxHeight||'',boxSizing:this.sizingTarget.style.boxSizing||''},positionedBy:{vertically:'auto'===b.top?'auto'===b.bottom?null:'bottom':'top',horizontally:'auto'===b.left?'auto'===b.right?null:'right':'left'},sizedBy:{height:'none'!==c.maxHeight,width:'none'!==c.maxWidth,minWidth:parseInt(c.minWidth,10)||0,minHeight:parseInt(c.minHeight,10)||0},margin:{top:parseInt(b.marginTop,10)||0,right:parseInt(b.marginRight,10)||0,bottom:parseInt(b.marginBottom,10)||0,left:parseInt(b.marginLeft,10)||0}}}},resetFit:function(){var b=this._fitInfo||{};for(var c in b.sizerInlineStyle)this.sizingTarget.style[c]=b.sizerInlineStyle[c];for(var c in b.inlineStyle)this.style[c]=b.inlineStyle[c];this._fitInfo=null},refit:function(){var b=this.sizingTarget.scrollLeft,c=this.sizingTarget.scrollTop;this.resetFit(),this.fit(),this.sizingTarget.scrollLeft=b,this.sizingTarget.scrollTop=c},position:function(){if(this.horizontalAlign||this.verticalAlign){this._discoverInfo(),this.style.position='fixed',this.sizingTarget.style.boxSizing='border-box',this.style.left='0px',this.style.top='0px';var b=this.getBoundingClientRect(),c=this.__getNormalizedRect(this.positionTarget),d=this.__getNormalizedRect(this.fitInto),e=this._fitInfo.margin,f={width:b.width+e.left+e.right,height:b.height+e.top+e.bottom},a=this.__getPosition(this._localeHorizontalAlign,this.verticalAlign,f,c,d),g=a.left+e.left,h=a.top+e.top,j=Math.min(d.right-e.right,g+b.width),k=Math.min(d.bottom-e.bottom,h+b.height);g=Math.max(d.left+e.left,Math.min(g,j-this._fitInfo.sizedBy.minWidth)),h=Math.max(d.top+e.top,Math.min(h,k-this._fitInfo.sizedBy.minHeight)),this.sizingTarget.style.maxWidth=Math.max(j-g,this._fitInfo.sizedBy.minWidth)+'px',this.sizingTarget.style.maxHeight=Math.max(k-h,this._fitInfo.sizedBy.minHeight)+'px',this.style.left=g-b.left+'px',this.style.top=h-b.top+'px'}},constrain:function(){if(!(this.horizontalAlign||this.verticalAlign)){this._discoverInfo();var b=this._fitInfo;b.positionedBy.vertically||(this.style.position='fixed',this.style.top='0px'),b.positionedBy.horizontally||(this.style.position='fixed',this.style.left='0px'),this.sizingTarget.style.boxSizing='border-box';var c=this.getBoundingClientRect();b.sizedBy.height||this.__sizeDimension(c,b.positionedBy.vertically,'top','bottom','Height'),b.sizedBy.width||this.__sizeDimension(c,b.positionedBy.horizontally,'left','right','Width')}},_sizeDimension:function(b,c,d,e,f){this.__sizeDimension(b,c,d,e,f)},__sizeDimension:function(b,c,d,e,f){var g=this._fitInfo,h=this.__getNormalizedRect(this.fitInto),j='Width'===f?h.width:h.height,k=c===e,m=k?j-b[e]:b[d],n=g.margin[k?d:e],o='offset'+f,p=this[o]-this.sizingTarget[o];this.sizingTarget.style['max'+f]=j-n-m-p+'px'},center:function(){if(!(this.horizontalAlign||this.verticalAlign)){this._discoverInfo();var b=this._fitInfo.positionedBy;if(!(b.vertically&&b.horizontally)){this.style.position='fixed',b.vertically||(this.style.top='0px'),b.horizontally||(this.style.left='0px');var c=this.getBoundingClientRect(),d=this.__getNormalizedRect(this.fitInto);if(!b.vertically){var e=d.top-c.top+(d.height-c.height)/2;this.style.top=e+'px'}if(!b.horizontally){var f=d.left-c.left+(d.width-c.width)/2;this.style.left=f+'px'}}}},__getNormalizedRect:function(b){return b===document.documentElement||b===window?{top:0,left:0,width:window.innerWidth,height:window.innerHeight,right:window.innerWidth,bottom:window.innerHeight}:b.getBoundingClientRect()},__getCroppedArea:function(b,c,d){var e=Math.min(0,b.top)+Math.min(0,d.bottom-(b.top+c.height)),f=Math.min(0,b.left)+Math.min(0,d.right-(b.left+c.width));return Math.abs(e)*c.width+Math.abs(f)*c.height},__getPosition:function(b,c,d,e,f){var g=[{verticalAlign:'top',horizontalAlign:'left',top:e.top+this.verticalOffset,left:e.left+this.horizontalOffset},{verticalAlign:'top',horizontalAlign:'right',top:e.top+this.verticalOffset,left:e.right-d.width-this.horizontalOffset},{verticalAlign:'bottom',horizontalAlign:'left',top:e.bottom-d.height-this.verticalOffset,left:e.left+this.horizontalOffset},{verticalAlign:'bottom',horizontalAlign:'right',top:e.bottom-d.height-this.verticalOffset,left:e.right-d.width-this.horizontalOffset}];if(this.noOverlap){for(var k,h=0,j=g.length;h<j;h++){for(var m in k={},g[h])k[m]=g[h][m];g.push(k)}g[0].top=g[1].top+=e.height,g[2].top=g[3].top-=e.height,g[4].left=g[6].left+=e.width,g[5].left=g[7].left-=e.width}c='auto'===c?null:c,b='auto'===b?null:b;for(var n,o,h=0;h<g.length;h++){if(o=g[h],!this.dynamicAlign&&!this.noOverlap&&o.verticalAlign===c&&o.horizontalAlign===b){n=o;break}var p=(!c||o.verticalAlign===c)&&(!b||o.horizontalAlign===b);if(this.dynamicAlign||p){n=n||o,o.croppedArea=this.__getCroppedArea(o,d,f);var q=o.croppedArea-n.croppedArea;if((0>q||0==q&&p)&&(n=o),0===n.croppedArea&&p)break}}return n}};</script></head><body></body></html>